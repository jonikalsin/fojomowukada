<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>error: lvalue required as unary &amp;amp; operand | MoxDash</title><meta name=generator content="Hugo 0.98.0"><meta name=description content="While compiling (with Linux Server release 6.1)
strftime(AppTime, sizeof(AppTime),&#34;%Y/%m/%d %T&#34;, localtime(&((long)u32_Time)));  getting error &#34;error: lvalue required as unary '&' operand&#34;
but the same code compiled successfully with Red Hat Enterprise Linux AS release 3. Why so? How to correct this?
2 2 Answers  The address-operator & requires a variable to take the address from. The result of your cast (long)u32_Time is a temporary that does not necessarily reside in memory and therefore has no address that could be taken."><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cayman/css/normalize.css><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet type=text/css><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cayman/css/cayman.css><link rel=apple-touch-icon sizes=180x180 href=./apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=./favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=./favicon-16x16.png><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css integrity=sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js integrity=sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script></head><body><section class=page-header><h1 class=project-name>MoxDash</h1><h2 class=project-tagline></h2><nav><a href=./index.html class=btn>Blog</a>
<a href=./sitemap.xml class=btn>Sitemap</a>
<a href=./index.xml class=btn>RSS</a></nav></section><section class=main-content><h1>error: lvalue required as unary &amp;amp; operand</h1><div><strong>Publish date: </strong>2024-07-02</div><img src=https://cdn.statically.io/img/cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><p>While compiling (with Linux Server release 6.1)</p><pre><code>strftime(AppTime, sizeof(AppTime),"%Y/%m/%d %T", localtime(&amp;((long)u32_Time))); </code></pre><p>getting error "error: lvalue required as unary '&' operand"</p><p>but the same code compiled successfully with Red Hat Enterprise Linux AS release 3.</p><p>Why so? How to correct this?</p><span class=d-none itemprop=commentCount>2</span><h2 class=mb0 data-answercount=2>2 Answers</h2><p>The address-operator <code>&</code> requires a variable to take the address from. The result of your cast <code>(long)u32_Time</code> is a temporary that does not necessarily reside in memory and therefore has no address that could be taken. So if that piece of code ever compiled somewhere it was a nonstandard compiler extension.</p><p>The standard, §5.3.1,3 demands:</p><p>The result of the unary & operator is a pointer to its operand. The operand shall be an lvalue [...]</p><p><strong>How to fix this:</strong> <code>std::localtime</code> expects a pointer to a <code>std::time_t</code> so you best provide that. You did not provide any explanation or further code, so I can only guess that <code>u32_Time</code> is some 4 byte unsigned arithmetic type that is supposed to represent a time in some manner. How that is properly converted into a <code>std::time_t</code> depends on how your compiler implements the latter and how you got the value of the further. Simply applying a C-cast is not portable, and casting to <code>long</code> is even less portable.<br><strong>If, and only if</strong> the <code>std::time_t</code> on your current platform is also a unsigned 32 bit type using the same representation as your <code>u32_Time</code>, it might suffice to use</p><pre><code> localtime(reinterpret_cast&lt;std::time_t*&gt;(&amp;u32_Time)); </code></pre><p>More portable would be storing the value in the correct data type first:</p><pre><code> std::time_t time = u32_Time; localtime(&amp;time); </code></pre><p>That way you will get the necessary warnings and/or errors if <code>time_t</code> and the type of <code>u32_Time</code> are not compatible.</p><p>I would strongly advice against using C-casts, because once you have to port this piece of code to another platform you will have no means to find that nasty cast easily.</p><span class=d-none itemprop=commentCount>0</span><p>It's probably best to start with what the error means. An "lvalue" is something that appears on the left side of an equals sign. What it means is that your argument to the "address of" operator (&) must be something that you could assign to. In your case, this isn't syntactically correct:</p><pre><code>(long)u32_Time = 0; </code></pre><p>The reason for this restriction is that the & operator returns the address of something that is stored somewhere. (long)u32_Time isn't stored somewhere, but u32_Time is.</p><p>This might have worked ok on more tolerant compilers because it would allocate some space for the long representation of u32_Time and then give you a pointer to that, but I wouldn't count on that working (as can be seen in Linux Server release 6.1).</p><p>To fix this, you can just create a new variable and take it's address instead:</p><pre><code>long long_Time = (long)u32_Time; strftime(AppTime, sizeof(AppTime),"%Y/%m/%d %T", localtime(&amp;long_Time)); </code></pre><p>However, that's still not perfect. localtime expects a time_t pointer, not a long pointer, and while they might be the same on your platform, you'd be better off with:</p><pre><code>time_t time_t_Time = (time_t)u32_Time; strftime(AppTime, sizeof(AppTime),"%Y/%m/%d %T", localtime(&amp;time_t_Time)); </code></pre><span class=d-none itemprop=commentCount></span><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmirpJawrLvVnqmfpJ%2Bse6S7zGiorp2jqbawutJoaWtvaG19c4KOnqmrp6Jiubety66cZqqVpsKqvsSdZJqrXaq7or7YZqapnaKWu6U%3D</p><footer class=site-footer><span class=site-footer-credits>Made with <a href=https://gohugo.io/>Hugo</a>. © 2022. All rights reserved.</span></footer></section><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://iklan.listspress.com/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://iklan.listspress.com/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>